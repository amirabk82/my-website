function ShowLoginBox(){$("#Login .LoginIcon").removeClass("Success");$("#Login .LoginIcon").removeClass("Error");$("#txtLoginEmail").val("");$("#txtLoginPass").val("");$("#LoginPartError").html("");$("#txtRegisterEmail").val("");$("#txtRegisterPass").val("");$("#txtRegisterConfirmPass").val("");$("#RegisterPartError").html("");$("#txtLoginConfirmCode").val("");$("#txtRegisterConfirmCode").val("");$("#txtRegisterMobile").val("");$("#RememberMe").prop("checked",!1);$("#Login").modal("show");$("#divWaitDesc").html('<div style="margin-top: 15px;margin-bottom: 15px;">از طریق فرم زیر، وارد حساب کاربری خود شوید و یا ثبت نام کنید.<\/div>');$("#divWaitDesc").show();$(".modal-open").attr("onclick","checkOpenBox();")}function ResendConfrimLoginCode(n,t,i,r,u,f,e){$("#RememberMe").is(":checked")==!0&&(e=30);$("#"+r).html("");$("#"+u).html("<i class='Loading-spin2 animate-spin'><\/i>");$("#"+f).attr("disabled","disabled");var h=$("#"+n).val(),o=$("#"+t).val(),c=$("#"+i).val(),s=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{E:o,__RequestVerificationToken:s},url:"/Home/ResendVerifyCodeLogin",success:function(n){var t,i;n[0].toString()=="1001"?$("#"+r).html("<span class='success'>کد فعال سازی مجددا برای شما پیامک شد.<\/span>."):n[0].toString()=="1002"?(t=parseInt(n[1]),t>60?(i=Math.floor(t/60),$("#"+r).html("برای ارسال مجدد کد فعالسازی بعد از "+i+" دقیقه و "+t%60+" ثانیه تلاش کنید.")):$("#"+r).html("برای ارسال مجدد کد فعالسازی بعد از "+t+" ثانیه تلاش کنید.")):$("#"+r).html("لطفا دوباره تلاش کنید.");$("#"+u).html("");$("#"+f).removeAttr("disabled")},error:function(){$("#"+u).html("")}})}function ConfrimLoginCode(n,t,i,r,u,f,e,o){$("#RememberMe").is(":checked")==!0&&(e=30);$("#"+r).html("");$("#"+u).html("<i class='Loading-spin2 animate-spin'><\/i>");$("#"+f).attr("disabled","disabled");var s=$("#"+n).val(),h=$("#"+t).val(),c=$("#"+i).val(),l=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{C:s,E:h,P:c,__RequestVerificationToken:l},url:"/Home/VerifyLoginUser",success:function(n){n=="1005"&&$("#"+r).html("لطفا مجددا نسبت به دریافت کد فعالسازی اقدام کنید.");n=="1002"?$("#"+r).html("نام کاربری یا کلمه عبور وارد شده نادرست می باشد"):n=="1004"?$("#"+r).html("کد فعالسازی نامعتبر میباشد"):n=="1010"?$("#"+r).html("شیکسونی عزیز رمز عبور شما منقضی شده است لطفا از طریق کلیک بر روی گزینه فراموشی  رمز عبور، رمز عبور خود را تغییر دهید"):$.get("/page/refreshtoken",function(n){var f=$("<div />").html(n).find('input[type="hidden"]').val(),u;$('input[name="__RequestVerificationToken"]').val(f);$("#"+t).val("");$("#"+i).val("");$("#"+r).html("ورود شما با موفقیت انجام شد");$("#Login").modal("hide");CheckCookie();u=document.URL;u.indexOf("/products")>0&&$("#SizeBox").hasClass("in")?change_Custome_User():(u.indexOf("/cart")>0&&ReadInfo(),o==1&&location.reload())});$("#"+u).html("");$("#"+f).removeAttr("disabled")},error:function(){$("#"+u).html("")}})}function ResendConfrimRegisterCode(n,t,i,r,u,f,e,o){$("#RememberMe").is(":checked")==!0&&(o=30);$("#"+u).html("");$("#"+f).html("<i class='Loading-spin2 animate-spin'><\/i>");$("#"+e).attr("disabled","disabled");var h=$("#"+n).val(),c=$("#"+t).val(),l=$("#"+r).val(),s=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{__RequestVerificationToken:s},url:"/Home/ResendVerifyCodeRegister",success:function(n){var t,i;n[0].toString()=="1001"?$("#"+u).html("<span class='success'>کد فعال سازی مجددا برای شما ایمیل و پیامک شد.<\/span>."):n[0].toString()=="1002"?(t=parseInt(n[1]),t>60?(i=Math.floor(t/60),$("#"+u).html("برای ارسال مجدد کد فعالسازی بعد از "+i+" دقیقه و "+t%60+" ثانیه تلاش کنید.")):$("#"+u).html("برای ارسال مجدد کد فعالسازی بعد از "+t+" ثانیه تلاش کنید.")):$("#"+u).html("لطفا دوباره تلاش کنید.");$("#"+f).html("");$("#"+e).removeAttr("disabled")},error:function(){$("#"+f).html("")}})}function ConfrimRegisterCode(n,t,i,r,u,f,e,o,s){$("#RememberMe").is(":checked")==!0&&(o=30);$("#"+u).html("");$("#"+f).html("<i class='Loading-spin2 animate-spin'><\/i>");$("#"+e).attr("disabled","disabled");var h=$("#"+n).val(),c=$("#"+t).val(),l=$("#"+i).val(),a=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{C:h,E:c,P:l,__RequestVerificationToken:a},url:"/Home/VerifyRegisterUser",success:function(n){n=="1004"&&$("#"+u).html("لطفا مجددا نسبت به دریافت کد فعالسازی اقدام کنید.");n=="1003"?$("#"+u).html("آدرس ایمیل یا کلمه عبور وارد شده نادرست می باشد"):n=="1002"?$("#"+u).html("کد فعالسازی نامعتبر میباشد"):$.get("/page/refreshtoken",function(n){var e=$("<div />").html(n).find('input[type="hidden"]').val(),f;$('input[name="__RequestVerificationToken"]').val(e);$("#"+Email).val("");$("#"+t).val("");$("#"+i).val("");$("#"+r).val("");$("#"+u).html("ثبت نام شما با موفقیت انجام شد ");f=document.URL;f.indexOf("/products")>0&&$("#SizeBox").hasClass("in")?change_Custome_User():s==1&&location.reload();ChangeLoginText(!0,"");CheckCookie()});$("#"+f).html("");$("#"+e).removeAttr("disabled")},error:function(){$("#"+f).html("")}})}function LoginUser(n,t,i,r,u,f,e){$("#RememberMe").is(":checked")==!0&&(f=30);$("#"+i).html("");$("#"+r).html("<i class='Loading-spin2 animate-spin'><\/i>");$("#"+u).attr("disabled","disabled");var o=$("#"+n).val(),s=$("#"+t).val(),h=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{E:o,P:s,__RequestVerificationToken:h},url:"/Home/LoginUser",success:function(f){f=="1002"?$("#"+i).html("نام کاربری یا کلمه عبور وارد شده نادرست می باشد"):f=="1003"?($("#"+i).html("حساب کاربری شما فعال نشده است لطفا ایمیل خود را چک نمایید"),$("#ConfirmLoginPartDiv").hide(),$("#ConfirmLoginPartDiv").removeClass("hidden"),$("#LoginPartDiv").hide(),$("#ConfirmLoginPartDiv").fadeIn()):f=="1005"?$("#"+i).html("نام کاربری یا کلمه عبور وارد شده نادرست می باشد"):f=="1010"?$("#"+i).html("شیکسونی عزیز رمز عبور شما منقضی شده است لطفا از طریق کلیک بر روی گزینه فراموشی  رمز عبور، رمز عبور خود را تغییر دهید."):f.toString()=="1011"?$("#"+i).html("شیکسونی عزیز رمز عبور شما منقضی شده است لطفا یک کلمه عبور جدید وارد نمایید"):$.get("/page/refreshtoken",function(r){var f=$("<div />").html(r).find('input[type="hidden"]').val(),u;$('input[name="__RequestVerificationToken"]').val(f);$("#"+n).val("");$("#"+t).val("");$("#"+i).html("ورود شما با موفقیت انجام شد");$("#Login").modal("hide");CheckCookie();u=document.URL;u.indexOf("/products")>0&&$("#SizeBox").hasClass("in")?change_Custome_User():(u.indexOf("/cart")>0&&ReadInfo(),e==1&&location.reload())});$("#"+r).html("");$("#"+u).removeAttr("disabled")},error:function(){$("#"+r).html("")}})}function LogOffUser(){var t=getQuerystring("s"),n,i;(t==null||t=="")&&(t="888");n=$("#logoutUri").val();(n==undefined||n==null||n=="")&&(n="/?s="+t);i=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{__RequestVerificationToken:i},url:"/Home/LogOffUser",success:function(){window.location.href=n},error:function(){}})}function IsUserAuthorized(){var n=!1,t=!1,i=$('input[name="__RequestVerificationToken"]').val();return $.ajax({type:"POST",cache:!1,async:!1,dataType:"json",data:{__RequestVerificationToken:i},url:"/Home/IsUserAuthorized",success:function(i){n=i=="1"?!0:!1;t=!0},error:function(){n=!1;t=!0}}),$("#divWaitDesc").html(""),n}function GetUserName(){var t=$('input[name="__RequestVerificationToken"]').val(),n="";return $.ajax({type:"POST",cache:!1,async:!1,dataType:"json",data:{__RequestVerificationToken:t},url:"/Home/GetUserName",success:function(t){n=t},error:function(){}}),$("#divWaitDesc").html(""),n}function CheckCookie(){}function ChangeLoginText(n,t){n?t!=""&&t!=undefined?(t.length>20&&(t=t.substring(0,17)+"..."),$("#UserInfo").attr("onclick",""),$("#UserInfo").html("<a href='/Profile'>"+t+"<\/a>"),$("#btnShowLoginPart").addClass("btnUserInfo")):($("#UserInfo").attr("onclick",""),$("#UserInfo").html("<a href='/Profile'>خوش آمدید...<\/a>"),$("#btnShowLoginPart").addClass("btnUserInfo")):($("#btnShowLoginPart").removeClass("btnUserInfo"),$("#UserInfo").attr("onclick","ShowLoginBox();"),$("#UserInfo").html("ورود / ثبت نام"))}function ReadInfo(){var n=readCookie("tlid");$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{tlid:n},url:"/Profile/GetUserInfo",success:function(n){if(n!=null){$("#txtLName")!=undefined&&$("#txtLName").val(n.strUserLastName);n.numUserGenderRef==1?$("#Gender1").attr("checked","checked"):n.numUserGenderRef==2&&$("#Gender2").attr("checked","");$("#txtName").val(n.strUserName);$("#txtTel").val(n.strUserTel);$("#txtMobile").val(n.strUserMob);$("#txtEmail").val(n.strUserEmail);$("#drpdwnOstan").val(n.strPostCenterRef);$("#drpdwnOstan").selectpicker("refresh");GetCity($("#drpdwnOstan").get(0).selectedIndex);$("#drpdwnCity").val(n.numCityRef);$("#drpdwnCity").selectpicker("refresh");$("#txtPostCode").val(n.strPostalCode);$("#txtAddress").val(n.strAddress);$("#LoginStep2").fadeOut();var t=document.URL;t.indexOf("/cart")>0&&CheckSendPrice();$("#divnotEmailUser").hide()}else $("#divnotEmailUser").show()}})}function RegisterUser(n,t,i,r,u,f){var e=getQuerystring("s"),s=getQuerystring("pu"),o;return(e==""||e==null)&&(e=888),$("#"+u).html("<i class='Loading-spin2 animate-spin'><\/i>"),$("#"+f).attr("disabled","disabled"),o=$('input[name="__RequestVerificationToken"]').val(),$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{M:$("#"+n).val(),P:$("#"+t).val(),s:e,PU:s,__RequestVerificationToken:o},url:"/Home/RegisterUser",success:function(n){if(n=$.parseJSON(n),n.toString()=="2001"||n.toString()=="3001")$("#"+r).html("شماره وارد شده تکراری می‌باشد"),$("#"+u).html("");else if(n.toString()=="4001")$("#"+r).html("شماره موبایل وارد شده فعال نشده است لطفا از قسمت ورود استفاده کنید"),$("#"+u).html("");else if(n.toString()=="1001"){$("#"+r).html('<span class="success">عضویت شما با موفقیت انجام شد.<\/span> <br> لطفا جهت تکمیل حساب کاربری خود، <b>کد فعالسازی<\/b> ارسال شده به ایمیل/پیامک خود را وارد کنید: ');$("#"+u).html("");$("#ConfirmRegisterPartDiv").hide();$("#ConfirmRegisterPartDiv").removeClass("hidden");$("#RegisterPartDiv").hide();$("#ConfirmRegisterPartDiv").fadeIn();try{GoogleAnalytic.EventClick("Register","Click","Unnkown-Gender")}catch(t){console.log("GA Error In RegisterUser : "+t)}}else $("#"+r).html("لطفا مجددا تلاش کنید"),$("#"+u).html(""),$.get("/page/refreshtoken",function(n){var t=$("<div />").html(n).find('input[type="hidden"]').val();$('input[name="__RequestVerificationToken"]').val(t)});$("#"+u).html("");$("#"+f).removeAttr("disabled")},error:function(){$("#"+u).html("")}}),!1}function ForgotPass(n,t,i){var r=$("#"+n).val(),u;$.trim(r)==""?$("#"+t).html("ایمیل خود را وارد کنید"):($("#"+i).html("<i class='Loading-spin2 animate-spin'><\/i>"),u=$('input[name="__RequestVerificationToken"]').val(),$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{e:r,__RequestVerificationToken:u},url:"/Home/ForgotPass",success:function(n){$("#"+t).html("");$("#"+i).html("");n==1?$("#"+t).html("<span style='color:#4db6ac;'>کلمه عبور شما به ایمیلتان ارسال شد<\/span>"):n==2?$("#"+t).html("آدرس ایمیل درست نمی‌باشد"):n==0&&$("#"+t).html("مشکل در ارسال ایمیل لطفا با پشتیبانی سایت تماس بگیرید")}}))}function ConfirmEmail(){var n=getQuerystring("uc"),t;n!=null&&n!=""&&(t=$('input[name="__RequestVerificationToken"]').val(),$.ajax({type:"POST",async:!0,cache:!1,dataType:"json",data:{uc:n,__RequestVerificationToken:t},url:"/Home/ConfirmEmail",success:function(n){n==1&&($("#divConfirmEmail").length?($("#divConfirmEmail").addClass("TopMessageSuccess"),$("#divConfirmEmail").html("عضویت شما با موفقیت تایید شد. لطفا اطلاعات خود را تکمیل نمایید")):AlertBox("عضویت شما با موفقیت تایید شد. لطفا اطلاعات خود را تکمیل نمایید.","Success",5e3))},error:function(){AlertBox("لطفا دوباره تلاش کنید","Error",5e3)}}))}function ShowOrderItem(n,t){for(var i="",u="",f=t.split(","),r=0;r<f.length;r++)if(f[r]!=""){var e=f[r].split(">"),h=e[0],o=e[1],s=e[2];i="<tr><td>{Name}<\/td><td>{Price}<\/td><td>{Count}<\/td><td>{Total}<\/td><\/tr>";i=i.replaceAll("{Name}",h);i=i.replaceAll("{Price}",s);i=i.replaceAll("{Count}",addCommas(o));i=i.replaceAll("{Total}",addCommas(o*s));u=u+i}return"<table class=OrderItemTbl id=OrderItemTbl{Order}><thead><tr><th>نام محصول<\/th><th>قیمت واحد<\/th><th>تعداد<\/th><th>مبلغ کل<\/th><\/tr><\/thead><tbody>".replaceAll("{Order}",n)+u+"<\/tbody><\/table>"}$(document).ready(function(){$("#btnLoginPart").click(function(){return MasterLogin(),!1});$("#btnRegisterPart").click(function(){return Register(),!1});$("#btnConfrimLoginPart").click(function(){return MasterConfrimLoginCode(),!1});$("#btnSendConfimCodeLoginPart").click(function(){return MasterSendConfimCodeLoginPart(),!1});$("#btnConfrimRegisterPart").click(function(){return MasterConfrimRegisterCode(),!1});$("#btnSendConfimCodeRegisterPart").click(function(){return MasterSendConfimCodeRegisterPart(),!1});$("#txtLoginEmail").attr("onblur","CheckEmail('txtLoginEmail',2,'LoginPartError')");$("#txtLoginPass").attr("onblur","CheckEmpty('txtLoginPass', 1,2,'LoginPartError')");$("#txtRegisterEmail").attr("onblur","CheckEmail('txtRegisterEmail',2,'RegisterPartError')");$("#txtRegisterMobile").attr("onblur","CheckMobile('txtRegisterMobile',2,'RegisterPartError')");$("#txtRegisterMobile").bind("paste",function(){return!1});$("#txtRegisterPass").attr("onblur","CheckEmpty('txtRegisterPass', 1,2,'RegisterPartError')");$("#txtRegisterConfirmPass").attr("onblur","CheckPassConfirm('txtRegisterConfirmPass','txtRegisterPass',2,'RegisterPartError')");$("#txtLoginConfirmCode").attr("onblur","MasterConfrimLoginCode()");ConfirmEmail()});